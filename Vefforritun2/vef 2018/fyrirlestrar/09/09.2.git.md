# Fyrirlestur 8.2

## A√∞eins um Git

### Vefforritun 2 ‚Äî HBV403G

#### √ìlafur Sverrir Kjartansson, [osk@hi.is](mailto:osk@hi.is)

---

## Commit message

* √ûegar vi√∞ vinnum √≠ version control getur veri√∞ erfitt a√∞ skrifa commit message
  - ‚Äûvann √≠ einhverju‚Äú
  - ‚Äûüí©‚Äú
* A√∞ vinna √≠ einum hlut √≠ einum og commita √° eftir getur hj√°lpa√∞

***

* "If I apply this commit, it will?"
  - "Add new function for foo"
  - "Refactor how we handle bar"

***

## Merge commits

√ûegar vi√∞ erum a√∞ vinna nokkur saman getum vi√∞ lent √≠ _m√∂rgum_ merge commitum

```bash
aaaaaaa ‚Äì Fix foo
bbbbbbb ‚Äì Merge branch 'master' of https://github.com/foo
ccccccc ‚Äì Add bar
ddddddd ‚Äì Merge branch 'master' of https://github.com/foo
eeeeeee ‚Äì Remove baz
fffffff ‚Äì Merge branch 'master' of https://github.com/foo
```

***

* Gerist √æegar vi√∞ vinnum m√∂rg beint √° `master`
  - B√¶tum vi√∞ okkar virkni
  - Reynum a√∞ pusha, einhver hefur gert √æa√∞ s√≠√∞an vi√∞ ger√∞um seinast
  - Pull og merge => f√°um merge commit
  - Pushum okkar vinnu

***

* H√¶gt a√∞ t√∫lka m√∂rg ‚Äû√≥√æ√∂rf‚Äú merge commit sem h√°va√∞a
* Hva√∞ segir commit saga okkur?
  - Allt sem ger√∞ist √≠ raun og veru? √û√° viljum vi√∞ merge commit
  - Sagan af √æv√≠ hvernig verkefni√∞ okkar var√∞ til? √û√° viljum vi√∞ ritst√Ωra s√∂gunni

***

## rebase

* rebase er √æegar vi√∞ vinnum √° branch a√∞ breytingum
* √ûegar kemur a√∞ √æv√≠ a√∞ b√¶ta √æeim vi√∞ master l√°tum vi√∞ eins og breytingar √° master hafi gerst _√°√∞ur en vi√∞ byrju√∞um_
* Endurskrifum s√∂guna
* L√¶tur vinnu sem gerist samhli√∞a l√≠ta √∫t fyrir a√∞ hafa gerst √≠ r√∂√∞

***

![rebase d√¶mi](img/basic-rebase-1.png "Mynd: https://git-scm.com/book/en/v2/Git-Branching-Rebasing")

N√Ωtt `experiment` branch

***

![rebase d√¶mi](img/basic-rebase-2.png "Mynd: https://git-scm.com/book/en/v2/Git-Branching-Rebasing")

Merge commit √æegar vi√∞ f√¶rum √° `master`

***

![rebase d√¶mi](img/basic-rebase-3.png "Mynd: https://git-scm.com/book/en/v2/Git-Branching-Rebasing")

√ç sta√∞inn fyrir merge notum vi√∞ _rebase_

***

## rebase h√¶ttur

* Erum a√∞ endurskrifa s√∂guna, getum lent √≠ vandr√¶√∞um
* Einf√∂ld regla til a√∞ lenda ekki √≠ vandr√¶√∞um me√∞ rebase er a√∞ rebasea **aldrei** commit sem eru til fyrir utan okkar repo
* √ûurfum a√∞ _force pusha_ ‚Äì ney√∞a Git til a√∞ breyta s√∂gu l√≠ka √≠ remote

***

> **Do not rebase commits that exist outside your repository.**

> If you follow that guideline, you‚Äôll be fine. If you don‚Äôt, people will hate you, and you‚Äôll be scorned by friends and family.

***

## amend

* Ef vi√∞ gleymum a√∞ b√¶ta vi√∞ skr√° e√∞a gerum villu √≠ commit message getum vi√∞ breytt
  - _√Å√∞ur en vi√∞ pushum_
* Stageum eins og √°√∞ur en keyrum amend commit
  - `git commit --amend -m "N√Ωtt commit message"`

***

## stash

* Ef vi√∞ erum a√∞ vinna √≠ einhverju litlu og viljum a√∞eins leggja √æa√∞ til hli√∞ar getum vi√∞ nota√∞ stash
* `git stash`
  - B√¶tir breyttum og stageu√∞um _tracked_ skr√°m √° stash stack
  - `git stash --include-untracked` tekur untracked skr√°r me√∞

***

* `git stash show -p`
  - S√Ωnir hva√∞ er efst √≠ stack
* `git stash pop`
  - Tekur efsta stash √≠ stack og keyrir √° working directory
* Getum nota√∞ stash til a√∞ geyma breytingar, pulla fr√° remote og popa stash s√≠√∞an
  - Gott fyrir litlar breytingar √≠ f√°um skr√°m

***

## revert

* Stundum viljum vi√∞ bakka me√∞ commit sem er b√∫i√∞ a√∞ pusha
* `git revert <id √° commit>`
* Git b√Ωr til revert commit sem er andhverfa √æess commit sem vi√∞ viljum ekki

***

## cherry-pick

* Stundum viljum vi√∞ f√¶ra commit √° milli
  - Kannski ger√∞um vi√∞ √æau √° vitlausu branchi
* `git cherry-pick <id √° commit>`
* Git leitar a√∞ commit √° √∂llum br√∂nchum og b√¶tir vi√∞
  - Ef commit er √° remote g√¶tum vi√∞ √æurft a√∞ keyra `git fetch` fyrst

***

## reset

* Stundum viljum vi√∞ h√¶tta vi√∞ allt sem vi√∞ erum b√∫in a√∞ vera a√∞ gera
* `git reset --hard`
* F√¶rir okkur √° n√Ωjasta commit og hendir √∂llu modified og untracked

***

## reflog

* Stundum fer allt √≠ k√∂ku og vi√∞ vitum ekkert
* `git reflog` listar allar a√∞ger√∞ir sem vi√∞ h√∂fum gert √≠ git
* Getum fundi√∞ sta√∞ √æar sem allt var √≠ g√≥√∞u og fari√∞ √æanga√∞ me√∞ `git reset`
  - `git reset --hard <id>`

***

## Git flight rules

* [Listi af a√∞st√¶√∞um](https://github.com/k88hudson/git-flight-rules) sem vi√∞ getum lent √≠ me√∞ Git
  - ‚Äû[I wrote the wrong thing in a commit message](https://github.com/k88hudson/git-flight-rules#i-wrote-the-wrong-thing-in-a-commit-message)‚Äú
  - ‚Äû[I've no idea what I did wrong](https://github.com/k88hudson/git-flight-rules#ive-no-idea-what-i-did-wrong)‚Äú
* ...og hvernig vi√∞ komumst til baka e√∞a h√¶ttum vi√∞ o.s.fr.

***

## N√°nar

* [Pro Git: 3.6 Git Branching - Rebasing](https://git-scm.com/book/en/v2/Git-Branching-Rebasing)
* [Pro Git: 7.3 Git Tools - Stashing and Cleaning](https://git-scm.com/book/en/v2/Git-Tools-Stashing-and-Cleaning)
* [Pro Git: 7.7 Git Tools - Reset Demystified](https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified)
* [Flight rules for Git](https://github.com/k88hudson/git-flight-rules)
